
<html>
    <body>
    
    <textarea id="demo" cols="120" rows="30"></textarea>
    <br/>
    <textarea id="demoPuml" cols="120" rows="30"></textarea>
    
    <script>
// var mxGraphStr = '<mxGraphModel dx="1455" dy="1325" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="0n0IU4AFpu9m964mzoINBeR1IBuRzci6" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_Container&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Single page application&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[js and angular]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;provides blah-blah-blah&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#23A2D9;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0E7DAD;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-60" y="-40" width="240" height="120" as="geometry"/></mxCell><mxCell id="4s6bR3l9yWDrHXdP76B1OaWMGdOcRrD8" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_Container&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Mobile App&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[Xamarin]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of container role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#23A2D9;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0E7DAD;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="260" y="-40" width="240" height="120" as="geometry"/></mxCell><mxCell id="lYkQJnxHK3j0Wg7kFHTgqhQOYOe9Myf5" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_ContainerDb&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Database&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[Relational Database Schema]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of storage type container role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;shape=cylinder3;size=15;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=#23A2D9;fontSize=12;fontColor=#ffffff;align=center;strokeColor=#0E7DAD;metaEdit=1;points=[[0.5,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.5,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];resizable=0;" vertex="1" parent="1"><mxGeometry x="-80" y="640" width="240" height="120" as="geometry"/></mxCell><mxCell id="CyGD4769bNRm36XREt9cOPVDQB232JHJ" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_System_Ext&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Mainframe Banking System&lt;/div&gt;&lt;div id=&quot;C4Type&quot; class=&quot;C4Param&quot;&gt;[Software System]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of external software system.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#8C8496;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#736782;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="270" y="640" width="240" height="120" as="geometry"/></mxCell><mxCell id="PTsrJf8BhEOFwrkKorI7shj7IhCKIMPb" value="&lt;div id=&quot;C4_Container_Boundary&quot;&gt;&lt;div style=&quot;text-align: left; font-weight: bold; font-size: 17px;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Container name&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 12px;&quot; id=&quot;C4Application&quot; class=&quot;C4Param&quot;&gt;[Container]&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#666666;fontColor=#333333;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;editable=1;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-80" y="170" width="590" height="410" as="geometry"/></mxCell><mxCell id="s0qkdjuP5GZpUf4qn7KBGMKkltjsbZaf" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_Component&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Sign In Controller&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[MVC REST Controller]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of component role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#63BEF2;fontColor=#ffffff;align=center;arcSize=6;strokeColor=#2086C9;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-50" y="190" width="240" height="120" as="geometry"/></mxCell><mxCell id="tjrKhauh2vzNXoELKVFFXQxjBpXZnYG7" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_Component&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Accounts Summary Controller&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[MVC REST Controller]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of component role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#63BEF2;fontColor=#ffffff;align=center;arcSize=6;strokeColor=#2086C9;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="240" y="190" width="240" height="120" as="geometry"/></mxCell><mxCell id="s44JRj4e8FD40j3ohdFGBZKPvjR5BSIv" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_Component&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Security Component&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[Spring Beam]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of component role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#63BEF2;fontColor=#ffffff;align=center;arcSize=6;strokeColor=#2086C9;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-50" y="400" width="240" height="120" as="geometry"/></mxCell><mxCell id="qDvAb91GdC97X3UdRA0AYCBBI7wAPfJR" value="&lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;C4_Component&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Mainframe Banking System Facade&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[Spring Beam]&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of component role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#63BEF2;fontColor=#ffffff;align=center;arcSize=6;strokeColor=#2086C9;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="240" y="400" width="240" height="120" as="geometry"/></mxCell><mxCell id="rTEOgZ4I0eGH8B5XiikTI9GKlJ2li1vl" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="1" source="s44JRj4e8FD40j3ohdFGBZKPvjR5BSIv" target="lYkQJnxHK3j0Wg7kFHTgqhQOYOe9Myf5"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="-80" y="780" as="sourcePoint"/><mxPoint x="120" y="560" as="targetPoint"/></mxGeometry></mxCell><mxCell id="RzEq30mybPD2hrK14tSCrKdEk0uByRLz" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="1" source="qDvAb91GdC97X3UdRA0AYCBBI7wAPfJR" target="CyGD4769bNRm36XREt9cOPVDQB232JHJ"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="360" y="520" as="sourcePoint"/><mxPoint x="160" y="780" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mNKSq1z5nfY5ne5kIBNScpE1fxjH5xi1" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Visits pages&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=#ffffff;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="s0qkdjuP5GZpUf4qn7KBGMKkltjsbZaf" target="s44JRj4e8FD40j3ohdFGBZKPvjR5BSIv"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="-160" y="350" as="sourcePoint"/><mxPoint x="80" y="350" as="targetPoint"/></mxGeometry></mxCell><mxCell id="z3akqpi7EW5NsCj4OaWNx9RA9XtBd6Jr" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Visits pages&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=#ffffff;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="tjrKhauh2vzNXoELKVFFXQxjBpXZnYG7" target="qDvAb91GdC97X3UdRA0AYCBBI7wAPfJR"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="80" y="320" as="sourcePoint"/><mxPoint x="80" y="410" as="targetPoint"/></mxGeometry></mxCell><mxCell id="oxCXNPRLT4u5KEFAD3LCa1PtjTIVhx22" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.25;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;curved=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="0n0IU4AFpu9m964mzoINBeR1IBuRzci6" target="s0qkdjuP5GZpUf4qn7KBGMKkltjsbZaf"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="60" y="120" as="sourcePoint"/><mxPoint x="300" y="120" as="targetPoint"/></mxGeometry></mxCell><mxCell id="A7onxt5uMjYwaZIMw5etGiItLbskUIRG" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.75;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="1" source="0n0IU4AFpu9m964mzoINBeR1IBuRzci6" target="tjrKhauh2vzNXoELKVFFXQxjBpXZnYG7"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="120" y="110" as="sourcePoint"/><mxPoint x="360" y="110" as="targetPoint"/><Array as="points"><mxPoint x="120" y="150"/><mxPoint x="300" y="150"/></Array></mxGeometry></mxCell><mxCell id="mi9q4bYo6bSTW8C5Oe06Rvv51Tc3xx49" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;curved=1;" edge="1" parent="1" source="4s6bR3l9yWDrHXdP76B1OaWMGdOcRrD8" target="s0qkdjuP5GZpUf4qn7KBGMKkltjsbZaf"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="360" y="120" as="sourcePoint"/><mxPoint x="600" y="120" as="targetPoint"/><Array as="points"><mxPoint x="380" y="110"/><mxPoint x="70" y="110"/></Array></mxGeometry></mxCell><mxCell id="SLJ89rVt3I3BxVR6b4i9VrrJLGjAmzz2" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.75;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="1" source="4s6bR3l9yWDrHXdP76B1OaWMGdOcRrD8" target="tjrKhauh2vzNXoELKVFFXQxjBpXZnYG7"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="480" y="100" as="sourcePoint"/><mxPoint x="720" y="100" as="targetPoint"/></mxGeometry></mxCell></root></mxGraphModel>'

var mxGraphStr = '<mxGraphModel dx="2138" dy="885" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="97aaBKwRkIgDUZNFqHm6MZ0pgIfTU7Nv" value="&lt;div id=&quot;C4_Person&quot;&gt;&lt;div style=&quot;font-size: 16px;font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Person name&lt;/div&gt;&lt;div id=&quot;C4Type&quot; class=&quot;C4Param&quot;&gt;[Person]&lt;/div&gt;&lt;br/&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of person.&lt;/div&gt;&lt;/div&gt;" style="editable=0;html=1;fontSize=11;dashed=0;whiteSpace=wrap;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;shape=mxgraph.c4.person2;align=center;metaEdit=0;points=[[0.5,0,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0]];resizable=0;" vertex="1" parent="1"><mxGeometry x="-360" y="10" width="200" height="180" as="geometry"/></mxCell><mxCell id="LH9y8zFXTK2zikzw871UxhzBla78VCjZ" value="&lt;div id=&quot;C4_System&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;System name&lt;/div&gt;&lt;div id=&quot;C4Type&quot; class=&quot;C4Param&quot;&gt;[Software System]&lt;/div&gt;&lt;br/&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of software system.&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#1061B0;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0D5091;metaEdit=1;resizable=0;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-50" y="220" width="240" height="120" as="geometry"/></mxCell><mxCell id="iDrX0aeYvdjDtBITn9ZheiwGrszL4zbF" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="97aaBKwRkIgDUZNFqHm6MZ0pgIfTU7Nv" target="LH9y8zFXTK2zikzw871UxhzBla78VCjZ"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="-290" y="370" as="sourcePoint"/><mxPoint x="-100" y="330" as="targetPoint"/></mxGeometry></mxCell><mxCell id="emrTV614a6jxEoZ1miDC1xvyC8Tka8dl" value="&lt;div id=&quot;C4_ContainerDb_Ext&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;External container name&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[Container:&amp;nbsp;e.g. Oracle Database 12]&lt;/div&gt;&lt;br/&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of external storage type container role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;shape=cylinder3;size=15;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=rgb(164&#9;164&#9;164&#9;);fontSize=12;fontColor=#ffffff;align=center;strokeColor=rgb(135&#9;135&#9;135&#9;);metaEdit=1;points=[[0.5,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.5,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];resizable=0;" vertex="1" parent="1"><mxGeometry x="-50" y="460" width="240" height="120" as="geometry"/></mxCell><mxCell id="j3MSTJOQzfPoPiCqyj8RffFMHFQlJmnW" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="LH9y8zFXTK2zikzw871UxhzBla78VCjZ" target="emrTV614a6jxEoZ1miDC1xvyC8Tka8dl"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="140" y="360" as="sourcePoint"/><mxPoint x="380" y="360" as="targetPoint"/><Array as="points"><mxPoint x="70" y="350"/><mxPoint x="250" y="350"/><mxPoint x="250" y="520"/></Array></mxGeometry></mxCell><mxCell id="CTJn5mSBG4RBDrdpSr2gVsjM5k6GW8SJ" value="&lt;div id=&quot;C4_ContainerQueue_Ext&quot;&gt;&lt;div style=&quot;font-size: 16px; font-weight: bold;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;External container name&lt;/div&gt;&lt;div id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[Container: e.g. Apache Kafka, etc.]&lt;/div&gt;&lt;br/&gt;&lt;div style=&quot;font-size: 11px; color: #cccccc;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;Description of external message bus type container role/responsibility.&lt;/div&gt;&lt;/div&gt;" style="editable=0;shape=cylinder3;size=15;direction=south;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=rgb(164&#9;164&#9;164&#9;);fontSize=12;fontColor=#ffffff;align=center;strokeColor=rgb(135&#9;135&#9;135&#9;);metaEdit=1;points=[[0.5,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.5,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];resizable=0;" vertex="1" parent="1"><mxGeometry x="340" y="220" width="240" height="120" as="geometry"/></mxCell><mxCell id="UD4D8Ho6fB3xNfZK5g2fiJ0baHu95oLk" value="&lt;div id=&quot;C4_Rel&quot;&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;font-size: 12px; text-align: center; font-weight: bold;&quot; id=&quot;C4Description&quot; class=&quot;C4Param&quot;&gt;e.g. Makes API calls&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;div style=&quot;text-align: center;&quot; id=&quot;C4Technology&quot; class=&quot;C4Param&quot;&gt;[e.g. sync JSON/HTTP]&lt;/div&gt;&#10;&#9;&#9;&#9;&lt;/div&gt;" style="editable=0;endArrow=blockThin;html=1;fontSize=10;labelBackgroundColor=transparent;fontColor=#404040;strokeWidth=1;endFill=1;strokeColor=#828282;elbow=vertical;metaEdit=1;endSize=14;startSize=14;jumpStyle=arc;jumpSize=16;rounded=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="LH9y8zFXTK2zikzw871UxhzBla78VCjZ" target="CTJn5mSBG4RBDrdpSr2gVsjM5k6GW8SJ"><mxGeometry width="240" relative="1" as="geometry"><mxPoint x="150" y="180" as="sourcePoint"/><mxPoint x="390" y="180" as="targetPoint"/></mxGeometry></mxCell><mxCell id="bEVqkgjbo42tHkc1cInyh8eKcrfogWnG" value="&lt;div id=&quot;C4_System_Boundary&quot;&gt;&lt;div style=&quot;text-align: left; font-weight: bold; font-size: 17px;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;System name&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 12px;&quot; id=&quot;C4Application&quot; class=&quot;C4Param&quot;&gt;[Software System]&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#666666;fontColor=#333333;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-110" y="40" width="760" height="650" as="geometry"/></mxCell><mxCell id="lFOsYJcfMsM3VeARgAfpY1hu6pYnphsp" value="&lt;div id=&quot;C4_Container_Boundary&quot;&gt;&lt;div style=&quot;text-align: left; font-weight: bold; font-size: 17px;&quot; id=&quot;C4Name&quot; class=&quot;C4Param&quot;&gt;Container name&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 12px;&quot; id=&quot;C4Application&quot; class=&quot;C4Param&quot;&gt;[Container]&lt;/div&gt;&lt;/div&gt;" style="editable=0;rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#666666;fontColor=#333333;labelBackgroundColor=none;align=left;verticalAlign=bottom;labelBorderColor=none;spacingTop=0;spacing=10;dashPattern=8 4;metaEdit=1;rotatable=0;perimeter=rectanglePerimeter;noLabel=0;labelPadding=0;allowArrows=0;connectable=0;expand=0;recursiveResize=0;pointerEvents=0;absoluteArcSize=1;points=[[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0.25,0],[1,0.5,0],[1,0.75,0],[0.75,1,0],[0.5,1,0],[0.25,1,0],[0,0.75,0],[0,0.5,0],[0,0.25,0]];" vertex="1" parent="1"><mxGeometry x="-80" y="160" width="700" height="250" as="geometry"/></mxCell></root></mxGraphModel>'


var parser = new DOMParser();
var serializer = new XMLSerializer();

var xmlDoc = parser.parseFromString(mxGraphStr,"text/xml");

var x = xmlDoc.getElementsByTagName("mxCell")

// var edges = []
// var nodes = []
// var defaultNodes = []
var xCellStyle = {
    edges: {
        params: {},
        raw: []
    },
    nodes: {
        params: {},
        raw: []
    },
    boundaries: {
        params: {},
        raw: [],
        objects: [], //all
        edges: [], //all
        boundaries: [], //all
        objectswb: {}, //w bndary key 
        edgeswn: {}, //w bndary key 
        boundarieswb: {} //w bndary key 
    }
}

// sort edges, nodes and boundaries
for (i = 0; i < x.length; i++) {
    if(x[i].getAttribute('edge')=="1"){
        xCellStyle['edges']['raw'].push(x[i])
        var rawPosition = xCellStyle['edges']['raw'].length -1
        xCellStyle['edges']['params'][x[i].getAttribute('id')] = {source: x[i].getAttribute('source'),
                                                        target:x[i].getAttribute('target'),
                                                        rawposition: rawPosition
                                                        }
        
        // edges.push(x[i])
    } else {
        if(x[i].getAttribute('id').length > 3){
            // defaultNodes.push(x[i])
            var temp1 = document.createElement('div');
            nValue = x[i].getAttribute('value')
            temp1.innerHTML = nValue;
            var Shape = temp1.getElementsByTagName('div')[0].getAttribute('id')
            var root = xCellStyle['nodes']
            if(Shape.indexOf("_Boundary") > -1){
                root = xCellStyle['boundaries']
            }

            root['raw'].push(x[i])
            // nodes.push(x[i])
            var rawPosition = root['raw'].length -1

            root['params'][x[i].getAttribute('id')] = {x: x[i].getElementsByTagName('mxGeometry')[0].getAttribute('x'),
                                                                    y: x[i].getElementsByTagName('mxGeometry')[0].getAttribute('y'),
                                                                    width: x[i].getElementsByTagName('mxGeometry')[0].getAttribute('width'),
                                                                    height: x[i].getElementsByTagName('mxGeometry')[0].getAttribute('height'),
                                                                    rawposition: rawPosition
                                                                    }
        }
    }
}

console.log(">>>>", xCellStyle)


// @startuml
// !include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
// ' uncomment the following line and comment the first to use locally
// ' !include C4_Component.puml

// LAYOUT_WITH_LEGEND()

// title Component diagram for Internet Banking System - API Application

// Container(spa, "Single Page Application", "javascript and angular", "Provides all the internet banking functionality to customers via their web browser.")
// Container(ma, "Mobile App", "Xamarin", "Provides a limited subset ot the internet banking functionality to customers via their mobile mobile device.")
// ContainerDb(db, "Database", "Relational Database Schema", "Stores user registration information, hashed authentication credentials, access logs, etc.")
// System_Ext(mbs, "Mainframe Banking System", "Stores all of the core banking information about customers, accounts, transactions, etc.")

// Container_Boundary(api, "API Application") {
//     Component(sign, "Sign In Controller", "MVC Rest Controlle", "Allows users to sign in to the internet banking system")
//     Component(accounts, "Accounts Summary Controller", "MVC Rest Controller", "Provides customers with a summary of their bank accounts")
//     Component(security, "Security Component", "Spring Bean", "Provides functionality related to singing in, changing passwords, etc.")
//     Component(mbsfacade, "Mainframe Banking System Facade", "Spring Bean", "A facade onto the mainframe banking system.")

//     Rel(sign, security, "Uses")
//     Rel(accounts, mbsfacade, "Uses")
//     Rel(security, db, "Read & write to", "JDBC")
//     Rel(mbsfacade, mbs, "Uses", "XML/HTTPS")
// }

// Rel(spa, sign, "Uses", "JSON/HTTPS")
// Rel(spa, accounts, "Uses", "JSON/HTTPS")

// Rel(ma, sign, "Uses", "JSON/HTTPS")
// Rel(ma, accounts, "Uses", "JSON/HTTPS")
// @enduml


for (let b = 0; b < xCellStyle.boundaries.raw.length; b++) {
    const bID = xCellStyle.boundaries.raw[b].getAttribute('id');

    var bx = Number(xCellStyle.boundaries.params[bID].x)
    var by = Number(xCellStyle.boundaries.params[bID].y)
    var bw = Number(xCellStyle.boundaries.params[bID].width)    
    var bh = Number(xCellStyle.boundaries.params[bID].height)    

    for (let b2 = 0; b2 < xCellStyle.boundaries.raw.length; b2++) {
        const bID = xCellStyle.boundaries.raw[b2].getAttribute('id');
        var ox = Number(xCellStyle.boundaries.params[bID].x)   
        var oy = Number(xCellStyle.boundaries.params[bID].y)     
        var ow = Number(xCellStyle.boundaries.params[bID].width)   
        var oh = Number(xCellStyle.boundaries.params[bID].height)

        if(isObjectInBoundry(bx, bw, by, bw, ox, ow, oy, oh)){
            xCellStyle.boundaries.boundaries.push(oID)
            if(typeof( xCellStyle.boundaries.boundarieswb[bID]) === 'undefined'){
                xCellStyle.boundaries.boundarieswb[bID] = []
            }
            xCellStyle.boundaries.boundarieswb[bID].push(oID)
        }
        
    }


    for (let o = 0; o < xCellStyle.nodes.raw.length; o++) {
        const oID = xCellStyle.nodes.raw[o].getAttribute('id');
        var ox = Number(xCellStyle.nodes.params[oID].x)
        var oy = Number(xCellStyle.nodes.params[oID].y)    
        var ow = Number(xCellStyle.nodes.params[oID].width)   
        var oh = Number(xCellStyle.nodes.params[oID].height)   

        if(isObjectInBoundry(bx, bw, by, bw, ox, ow, oy, oh)){
            xCellStyle.boundaries.objects.push(oID)
            if(typeof( xCellStyle.boundaries.objectswb[bID]) === 'undefined'){
                xCellStyle.boundaries.objectswb[bID] = []
            }
            xCellStyle.boundaries.objectswb[bID].push(oID)
        }

        console.log("Node: ",oID," is indide of boundry:", bID, " >>> ", isObjectInBoundry(bx, bw, by, bw, ox, ow, oy, oh))
    }

}

console.log(">>>>", xCellStyle)


// nodes = xCellStyle.nodes.raw.concat(xCellStyle.edges.raw)

// console.log(getPumlStringByType(xCellStyle.nodes.raw), xCellStyle)



function getPumlStringByType(nodes, xCellStyle, checkBounadary) {
    var c4Doc = ""
    for (let index = 0; index < nodes.length; index++) {
        console.log(nodes, nodes[index])
        const node = nodes[index];
        var nID = nodes[index].id
        var nValue = nodes[index].getAttribute('value')
        
        var temp = document.createElement('div');
        temp.innerHTML = nValue;


        console.log("TEMP >>>>", temp, xmlDoc)

        var Shape = temp.getElementsByTagName('div')[0].getAttribute('id')
        // var Count = temp.firstChild.childElementCount

        var c4Params = temp.firstChild.getElementsByClassName('C4Param')

        console.log("C4Params >>> ", c4Params)

        var inputs = []
        var values = []

        var innerForm = ""

        // push all params names and values to array
        for (let i = 0; i < c4Params.length; i++) {
            const param = c4Params[i];

            inputs.push(c4Params[i].getAttribute('id'))
            values.push(c4Params[i].innerHTML)
        }

        var ComponentName = Shape.split('C4_').join("")
        var str = ""

        //system/system_ext quirk
        switch (ComponentName) {
            case "Rel":
            case "BiRel":
                if(checkBounadary){
                    if(xCellStyle.boundaries.objects.includes(xCellStyle.edges.params[nID].source)){
                        console.log("REl in boundry")
                        xCellStyle.boundaries.edges.push(nID)
                        if(typeof(xCellStyle.boundaries.edgeswn[xCellStyle.edges.params[nID].source])==='undefined'){
                            xCellStyle.boundaries.edgeswn[xCellStyle.edges.params[nID].source] = []
                        }
                        xCellStyle.boundaries.edgeswn[xCellStyle.edges.params[nID].source].push(nID)
                    } else {
                        str += ComponentName+"("+xCellStyle.edges.params[nID].source+","+xCellStyle.edges.params[nID].target+","
                    }
                } else {
                    str += ComponentName+"("+xCellStyle.edges.params[nID].source+","+xCellStyle.edges.params[nID].target+","
                }
                break;
            case "System":
            case "System_Ext":
            case "Person":
            case "Person_Ext":
                if(c4Params.length == 3){
                    values.splice(1, 1); //pop out second value 
                }
            case "Container_Boundary":         
            case "System_Boundary":  
                // break;
            default:
                if(checkBounadary){
                    if(xCellStyle.boundaries.objects.includes(nID)){
                        console.log("Obj in boundry")
                    } else {
                        str += ComponentName+"("+nID+","
                    }
                } else {
                    str += ComponentName+"("+nID+","
                }
                break;
        }

        if(str != ""){
            for (let i = 0; i < values.length; i++) {
                const val = values[i];
                str += '"'+val.split('[').join('').split(']').join('')+'"'
                if(values.length - i == 1){
                    str += ""
                } else {
                    str += ","
                }
            }

            str += ")"
        }

        if(!checkBounadary){ 
            var NodesStr = ""
            var EdgesStr = ""
            switch (ComponentName) {
                case "Container_Boundary":         
                case "System_Boundary":  
                    str += "{\n"
                    console.log("inBoundary >>", xCellStyle.boundaries.objectswb[nID])
                    var bNodes = xCellStyle.boundaries.objectswb[nID]
                    console.log("CHECK NODES >>> ", bNodes)
                    for (let n = 0; n < bNodes.length; n++) {
                        const nelem = bNodes[n];
                        console.log("NODE >>>", nelem, xCellStyle.nodes.raw[xCellStyle.nodes.params[nelem].rawposition])
                        NodesStr += "\t"+getPumlStringByType([xCellStyle.nodes.raw[xCellStyle.nodes.params[nelem].rawposition]], xCellStyle, false)
                        
                        console.log(">>>", xCellStyle)
                        if(nelem in xCellStyle.boundaries.edgeswn && typeof(xCellStyle.boundaries.edgeswn[nelem])==="object"){
                            for (let e = 0; e < xCellStyle.boundaries.edgeswn[nelem].length; e++) {
                                const edge = xCellStyle.boundaries.edgeswn[nelem][e];
                                EdgesStr += "\t"+getPumlStringByType([xCellStyle.edges.raw[xCellStyle.edges.params[edge].rawposition]], xCellStyle, false)

                            
                            }
                        }
 
                    }

                    // var bEdges = xCellStyle.boundaries.edges[nID]
                    // console.log("CHECK NODES >>> ", bEdges)
                    // for (let n = 0; n < bEdges.length; n++) {
                    //     const nelem = bEdges[n];
                    //     console.log("EDGE >>>", nelem, xCellStyle.nodes.raw[xCellStyle.nodes.params[nelem].rawposition])
                    //     str += getPumlStringByType([xCellStyle.nodes.raw[xCellStyle.nodes.params[nelem].rawposition]], xCellStyle, false)
                        
                    // }
            str += NodesStr
            str += EdgesStr
            str += `}`
  
            }
        }


        if(str != ""){
            c4Doc += str+"\n";
        }
        


        // console.log(nID, Shape, inputs, values)
    }
    return c4Doc;
}

// for (let i = 0; i < xCellStyle.boundaries.raw.length; i++) {
//     var bDoc = ""
//     var str = ""


// }


function isObjectInBoundry(bx, bw, by, bh, ox, ow, oy, oh){



    var inBoundary = false
    var xresult = false
    var yresult = false

    console.log("dimensions: ",bx, bw, by, bw, ox, ow, oy, oh)

    if(bx < ox && ox < bx+bw && bx < ox+ow && ox+ow < bx+bw){
        xresult = true
    }

    if(by < oy && oy < by+bh && by < oy+oh && ox+ow < by+bh){
        yresult = true
    }

    if(xresult && yresult){
        inBoundary = true
        console.log('✅ num is between the two numbers');
    }

    return inBoundary;
}


var DocRootNodes = getPumlStringByType(xCellStyle.nodes.raw, xCellStyle, true)
var DocRootEdges = getPumlStringByType(xCellStyle.edges.raw, xCellStyle, true)
var DocRootBoundaries = getPumlStringByType(xCellStyle.boundaries.raw, xCellStyle, false)


var c4Doc = `@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
' uncomment the following line and comment the first to use locally
' !include C4_Component.puml

LAYOUT_WITH_LEGEND()

`
c4Doc += DocRootNodes + "\n"
c4Doc += DocRootBoundaries + "\n"
c4Doc += DocRootEdges + "\n"

c4Doc += `
@enduml`

console.log(c4Doc)

var xmlStr = serializer.serializeToString(xmlDoc);

// console.log("TXT >>> ", edges, nodes, defaultNodes)

document.getElementById("demo").innerHTML = xmlStr;
document.getElementById("demoPuml").innerHTML = c4Doc;


</script>

</body>
</html>